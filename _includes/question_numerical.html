<div class="question-container" id="question-{{ include.id }}">
    
    <!-- 1. Give the header a unique ID so we can link the input to it -->
    <h3 id="label-{{ include.id }}">Question: {{ include.title | default: "Numerical Input" }}</h3>
    
    <div class="question-content">
        {{ include.question_text | markdownify }}
    </div>

    <!-- This div wraps the input and buttons for correct layout -->
    <div class="numerical-answer-container">
        
        <!-- 2. Link this input to the header ID using aria-labelledby -->
        <input 
            type="number" 
            id="input-{{ include.id }}" 
            step="any" 
            placeholder="Enter your answer" 
            aria-labelledby="label-{{ include.id }}">
        
        <!-- This div groups the action buttons together -->
        <div>
            <button class="btn" onclick="checkNumericalAnswer('{{ include.id }}', '{{ include.correct_answer }}', '{{ include.tolerance | default: 0 }}')">Check Answer</button>
            
            {% if include.solution_text %}
                <!-- 3. Add ARIA attributes to tell screen readers this controls a hidden section -->
                <button 
                    class="btn btn-primary solution-toggle-button" 
                    id="btn-sol-{{ include.id }}"
                    aria-expanded="false" 
                    aria-controls="solution-{{ include.id }}" 
                    onclick="toggleSolution('solution-{{ include.id }}', this)">
                    Show Solution Hint
                </button>
            {% endif %}
        </div>

    </div>

    <!-- 4. aria-live="polite" ensures the screen reader speaks the result when it appears -->
    <div id="feedback-{{ include.id }}" aria-live="polite"></div>
    
    {% if include.solution_text %}
        <div id="solution-{{ include.id }}" class="solution-content" style="display:none;">
            <h4>Solution:</h4>
            {{ include.solution_text | markdownify }}
        </div>
    {% endif %}
</div>
